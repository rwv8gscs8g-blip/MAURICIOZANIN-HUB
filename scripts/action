#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
CMD_FILE="$ROOT_DIR/scripts/command.txt"

if [[ ! -f "$CMD_FILE" ]]; then
  echo "Arquivo $CMD_FILE nao encontrado."
  exit 1
fi

CMD="$(grep -v '^[[:space:]]*#' "$CMD_FILE" | sed '/^[[:space:]]*$/d')"

if [[ -z "$CMD" ]]; then
  echo "Nenhum comando valido em $CMD_FILE"
  exit 1
fi

echo "Executando comando(s) de $CMD_FILE:"
echo "$CMD"
echo

bash -lc "$CMD"
